"use strict";exports.id=895,exports.ids=[895],exports.modules={6357:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.d(t,{We:()=>executeAIStep});var n=s(2079),o=e([n]);n=(o.then?(await o)():o)[0];let a=process.env.OPENAI_API_KEY;if(!a)throw Error("Missing OpenAI API key");new n.default({apiKey:a});let interpolateInputs=(e,t)=>{let s=e;return Object.entries(t).forEach(([e,t])=>{let r=`{{${e}}}`,n="";n="object"==typeof t?JSON.stringify(t,null,2):String(t),s=s.replace(RegExp(r,"g"),n)}),s};async function executeAIStep(e,t){let s=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${process.env.OPENAI_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:e.systemPrompt||"You are a helpful assistant."},{role:"user",content:interpolateInputs(e.userPrompt||"",t)}],max_tokens:2e3,temperature:.7})}),r=await s.json(),n=r.usage.total_tokens;return{content:r.choices[0].message.content,cost:n/1e3*.002,tokens:n}}r()}catch(e){r(e)}})},9492:(e,t,s)=>{s.d(t,{O:()=>a});var r=s(2885);let n="https://rpudkaqdoguytyweytww.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwdWRrYXFkb2d1eXR5d2V5dHd3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgxNDI3NTMsImV4cCI6MjA2MzcxODc1M30.GWu-jUQXMU94kTuGx9aK5aG_xNVjJFq9lbrcLUW8HBA";if(!n||!o)throw Error("Missing Supabase environment variables");let a=(0,r.createClient)(n,o)}};