"use strict";(()=>{var t={};t.id=635,t.ids=[635],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},1812:(t,e,r)=>{r.r(e),r.d(e,{config:()=>i,default:()=>u,routeModule:()=>l});var o={};r.r(o),r.d(o,{default:()=>handler});var s=r(1802),n=r(7153),a=r(6249);let d=[];async function handler(t,e){let{id:r}=t.query;if("POST"===t.method)try{let t=`instance-${Date.now()}`,o=new Date().toISOString(),s={id:t,workflow_id:r,started_by:"demo-user-123",started_at:o,completed_at:null,status:"in_progress",current_step_index:0,steps_completed:[],current_step_data:null,total_steps:0,created_at:o,updated_at:o};return d.push(s),e.status(201).json({instance:s,message:"Workflow started successfully"})}catch(t){return console.error("Error starting workflow:",t),e.status(500).json({error:"Failed to start workflow"})}if("GET"===t.method)try{let{instanceId:o}=t.query;if(o){let t=d.find(t=>t.id===o);if(!t)return e.status(404).json({error:"Workflow instance not found"});return e.status(200).json({instance:t})}{let t=d.filter(t=>t.workflow_id===r);return e.status(200).json({instances:t})}}catch(t){return console.error("Error fetching workflow instances:",t),e.status(500).json({error:"Failed to fetch workflow instances"})}if("PUT"===t.method)try{let{instanceId:r,action:o,stepData:s}=t.body,n=d.find(t=>t.id===r);if(!n)return e.status(404).json({error:"Workflow instance not found"});if("complete_step"===o)return n.steps_completed.push({step_index:n.current_step_index,completed_at:new Date().toISOString(),data:s}),n.current_step_index+=1,n.updated_at=new Date().toISOString(),n.current_step_index>=n.total_steps&&(n.status="completed",n.completed_at=new Date().toISOString()),e.status(200).json({instance:n});if("update_step_data"===o)return n.current_step_data=s,n.updated_at=new Date().toISOString(),e.status(200).json({instance:n});return e.status(400).json({error:"Invalid action"})}catch(t){return console.error("Error updating workflow instance:",t),e.status(500).json({error:"Failed to update workflow instance"})}return e.status(405).json({error:"Method not allowed"})}let u=(0,a.l)(o,"default"),i=(0,a.l)(o,"config"),l=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/workflows/[id]/execute",pathname:"/api/workflows/[id]/execute",bundlePath:"",filename:""},userland:o})}};var e=require("../../../../webpack-api-runtime.js");e.C(t);var __webpack_exec__=t=>e(e.s=t),r=e.X(0,[222],()=>__webpack_exec__(1812));module.exports=r})();