"use strict";(()=>{var e={};e.id=942,e.ids=[942,660],e.modules={346:(e,s,t)=>{t.r(s),t.d(s,{config:()=>q,default:()=>k,getServerSideProps:()=>C,getStaticPaths:()=>P,getStaticProps:()=>_,reportWebVitals:()=>Z,routeModule:()=>R,unstable_getServerProps:()=>W,unstable_getServerSideProps:()=>U,unstable_getStaticParams:()=>B,unstable_getStaticPaths:()=>E,unstable_getStaticProps:()=>A});var r={};t.r(r),t.d(r,{default:()=>_id_,getServerSideProps:()=>getServerSideProps});var a=t(7093),n=t(5244),i=t(1323),l=t(9209),o=t.n(l),d=t(5913),c=t(997),m=t(968),x=t.n(m),u=t(1163),h=t(7435),p=t(1590),g=t(8301),f=t(423),b=t(3710),j=t(2292),N=t(6076),v=t(7344),w=t(277),y=t(6689),S=t(1649);let getServerSideProps=async e=>{let{id:s}=e.params;try{let{createClient:e}=await Promise.resolve().then(t.t.bind(t,2885,23)),r=process.env.SUPABASE_URL,a=process.env.SUPABASE_ANON_KEY;if(!r||!a)throw Error("Missing Supabase environment variables");let n=e(r,a),{data:i,error:l}=await n.from("workflows").select(`
        *,
        steps:workflow_steps(*)
      `).eq("id",s).single();if(l){if("PGRST116"===l.code)return{notFound:!0};throw l}let o={id:i.id,title:i.title,description:i.description,steps:i.steps.sort((e,s)=>e.order_index-s.order_index).map(e=>({type:e.type,label:e.label,systemPrompt:e.system_prompt,userPrompt:e.user_prompt,instructions:e.instructions})),author:"Demo User",usageCount:0,rating:4.5,createdAt:i.created_at,version:i.version,versionNotes:i.version_notes};return{props:{workflow:o}}}catch(e){return console.error("Error fetching workflow:",e),{props:{workflow:null,error:"Failed to load workflow"}}}},_id_=({workflow:e,error:s})=>{let t=(0,u.useRouter)(),{data:r}=(0,S.useSession)(),[a,n]=(0,y.useState)(-1),handleBack=()=>{t.push("/workflows")},handleNextStep=()=>{e&&a<e.steps.length-1?n(a+1):n(-1)};return s?c.jsx(h.Z,{children:c.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg p-6",children:(0,c.jsxs)("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-medium text-red-800",children:"Error"}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s}),c.jsx("div",{className:"mt-6",children:(0,c.jsxs)("button",{onClick:handleBack,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-human hover:bg-human-dark",children:[c.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Back to Workflows"]})})]})})}):e?(0,c.jsxs)(h.Z,{children:[(0,c.jsxs)(x(),{children:[(0,c.jsxs)("title",{children:[e.title," | AllIance"]}),c.jsx("meta",{name:"description",content:e.description})]}),(0,c.jsxs)("div",{className:"pb-5 border-b border-gray-200 sm:flex sm:items-center sm:justify-between",children:[(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx("button",{onClick:handleBack,className:"mr-4 text-gray-400 hover:text-gray-500",children:c.jsx(p.Z,{className:"h-5 w-5"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.title})]}),c.jsx("div",{className:"mt-3 flex sm:mt-0 sm:ml-4",children:-1===a?(0,c.jsxs)("button",{onClick:()=>{n(0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-human hover:bg-human-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-human",children:[c.jsx(g.Z,{className:"mr-2 h-4 w-4"}),"Start Workflow"]}):c.jsx("button",{onClick:handleNextStep,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-human hover:bg-human-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-human",children:a<e.steps.length-1?"Next Step":"Complete Workflow"})})]}),c.jsx("div",{className:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg",children:(0,c.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Created by ",e.author]}),(0,c.jsxs)("p",{className:"text-sm text-gray-500",children:["Used ",e.usageCount," times"]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{className:"text-gray-400 hover:text-gray-500",children:c.jsx(f.Z,{className:"h-5 w-5"})}),r&&r.user.name===e.author&&c.jsx("button",{className:"text-gray-400 hover:text-gray-500",children:c.jsx(b.Z,{className:"h-5 w-5"})}),(0,c.jsxs)("div",{className:"flex items-center",children:[c.jsx(j.Z,{className:"h-5 w-5 text-yellow-400"}),c.jsx("span",{className:"ml-1 text-sm text-gray-500",children:e.rating})]})]})]}),c.jsx("div",{className:"mt-4",children:c.jsx("p",{className:"text-gray-700",children:e.description})}),e.version&&(0,c.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,c.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Version: ",e.version]}),e.versionNotes&&c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.versionNotes})]}),(0,c.jsxs)("div",{className:"mt-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Workflow Steps"}),c.jsx("div",{className:"mt-4 space-y-6",children:e.steps.map((e,s)=>(0,c.jsxs)("div",{className:`flex items-start ${a===s?"bg-gray-50 p-4 rounded-lg border border-gray-200":""}`,children:[s>0&&c.jsx("div",{className:"mr-3 flex flex-col items-center",children:c.jsx(N.Z,{className:"h-5 w-5 text-gray-300"})}),c.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${"human"===e.type?"bg-human-light":"bg-ai-light"}`,children:"human"===e.type?c.jsx(v.Z,{className:"h-5 w-5 text-human"}):c.jsx(w.Z,{className:"h-5 w-5 text-ai"})}),(0,c.jsxs)("div",{className:"ml-3 flex-1",children:[(0,c.jsxs)("p",{className:`text-sm font-medium ${"human"===e.type?"text-human-dark":"text-ai-dark"}`,children:["human"===e.type?"Human":"AI"," Step ",s+1]}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.label}),a===s&&c.jsx("div",{className:"mt-4",children:"human"===e.type?(0,c.jsxs)("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Complete this step by providing your input:"}),c.jsx("textarea",{rows:4,className:"shadow-sm block w-full focus:ring-human focus:border-human sm:text-sm border border-gray-300 rounded-md",placeholder:"Enter your contribution..."}),c.jsx("button",{onClick:handleNextStep,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-human hover:bg-human-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-human",children:"Submit and Continue"})]}):(0,c.jsxs)("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"AI is processing this step..."}),c.jsx("div",{className:"animate-pulse flex space-x-4",children:(0,c.jsxs)("div",{className:"flex-1 space-y-4 py-1",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,c.jsxs)("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})}),c.jsx("button",{onClick:handleNextStep,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-ai hover:bg-ai-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ai",children:"Continue to Next Step"})]})})]})]},s))})]})]})})]}):c.jsx(h.Z,{children:c.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg p-6",children:c.jsx("div",{className:"text-center",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Loading..."})})})})},k=(0,i.l)(r,"default"),_=(0,i.l)(r,"getStaticProps"),P=(0,i.l)(r,"getStaticPaths"),C=(0,i.l)(r,"getServerSideProps"),q=(0,i.l)(r,"config"),Z=(0,i.l)(r,"reportWebVitals"),A=(0,i.l)(r,"unstable_getStaticProps"),E=(0,i.l)(r,"unstable_getStaticPaths"),B=(0,i.l)(r,"unstable_getStaticParams"),W=(0,i.l)(r,"unstable_getServerProps"),U=(0,i.l)(r,"unstable_getServerSideProps"),R=new a.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/workflows/[id]",pathname:"/workflows/[id]",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:r})},2885:e=>{e.exports=require("@supabase/supabase-js")},1649:e=>{e.exports=require("next-auth/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[209,450,760,664,387,163,47,999,149],()=>__webpack_exec__(346));module.exports=t})();